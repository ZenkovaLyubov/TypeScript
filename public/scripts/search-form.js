import { renderBlock } from './lib.js';
import { funcSearch } from './search-helpers.js';
export function renderSearchFormBlock(checkInDate, checkOutDate) {
    const todayDate = new Date().toISOString().slice(0, 10);
    const minYear = new Date().toISOString().slice(0, 4);
    const minMonth = new Date().toISOString().slice(5, 7);
    //дата въезда. Если нет, то по умолчанию + 1 день от текущего дня
    const checkInDateDefault = new Date(new Date());
    checkInDateDefault.setDate(new Date().getDate() + 1);
    const checkInDateDefault1 = checkInDateDefault.toISOString().slice(0, 10);
    const checkInDateStr = (checkInDate === null || checkInDate === void 0 ? void 0 : checkInDate.toISOString().slice(0, 10)) || checkInDateDefault1;
    // дата выезда. по умолчанию (+2 дня от даты въезда)
    const checkOutDateDefault = new Date(new Date(checkInDateStr));
    checkOutDateDefault.setDate(new Date(checkInDateStr).getDate() + 2);
    const checkOutDateDefault1 = checkOutDateDefault.toISOString().slice(0, 10);
    const checkOutDateStr = (checkOutDate === null || checkOutDate === void 0 ? void 0 : checkOutDate.toISOString().slice(0, 10)) || checkOutDateDefault1;
    // максимальная дата в календаре, которую можно указать.
    // Это последний день следующего месяца
    const maxDateFull = new Date(Number(minYear), Number(minMonth) + 1, 0);
    const maxDay = maxDateFull.getDate();
    const maxMounth = maxDateFull.getMonth() + 1;
    const maxYear = maxDateFull.getFullYear();
    const maxDate = `${maxYear}-${maxMounth}-${maxDay}`;
    function handleFormSubmit(e, namesFieldsForm) {
        e.preventDefault();
        if (e.target) {
            const dataForm = new FormData(e.target);
            const dataRows = {};
            namesFieldsForm.forEach((el) => {
                dataRows[el] = dataForm.get(el);
            });
            funcSearch(dataRows);
        }
    }
    renderBlock('search-form-block', `
    <form id="form">
      <fieldset class="search-filedset">
        <div class="row">
          <div>
            <label for="city">Город</label>
            <input id="city" type="text" disabled value="Санкт-Петербург" />
            <input type="hidden" disabled value="59.9386,30.3141" />
          </div>
          <!--<div class="providers">
            <label><input type="checkbox" name="provider" value="homy" checked /> Homy</label>
            <label><input type="checkbox" name="provider" value="flat-rent" checked /> FlatRent</label>
          </div>--!>
        </div>
        <div class="row">
          <div>
            <label for="check-in-date">Дата заезда</label>
            <input id="check-in-date" type="date" value=${checkInDateStr} min=${todayDate} max=${maxDate} name="checkin" />
          </div>
          <div>
            <label for="check-out-date">Дата выезда</label>
            <input id="check-out-date" type="date" value=${checkOutDateStr} min=${todayDate} max=${maxDate} name="checkout" />
          </div>
          <div>
            <label for="max-price">Макс. цена суток</label>
            <input id="max-price" type="text" value="" name="price" class="max-price" />
          </div>
          <div>
            <div><button type="submit">Найти</button></div>
          </div>
        </div>
      </fieldset>
    </form>
    `);
    const searchForm = document.getElementById('form');
    const namesFieldsForm = ['checkin', 'checkout', 'price'];
    searchForm === null || searchForm === void 0 ? void 0 : searchForm.addEventListener('submit', (e) => handleFormSubmit(e, namesFieldsForm));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLWZvcm0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2VhcmNoLWZvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUV2QyxPQUFPLEVBQUUsVUFBVSxFQUFlLE1BQU0scUJBQXFCLENBQUM7QUFFOUQsTUFBTSxVQUFVLHFCQUFxQixDQUFDLFdBQWtCLEVBQUUsWUFBbUI7SUFDM0UsTUFBTSxTQUFTLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3hELE1BQU0sT0FBTyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyRCxNQUFNLFFBQVEsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFdEQsaUVBQWlFO0lBQ2pFLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sbUJBQW1CLEdBQUcsa0JBQWtCLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMxRSxNQUFNLGNBQWMsR0FDbEIsQ0FBQSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsV0FBVyxHQUFHLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUksbUJBQW1CLENBQUM7SUFFakUsb0RBQW9EO0lBQ3BELE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztJQUMvRCxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDcEUsTUFBTSxvQkFBb0IsR0FBRyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzVFLE1BQU0sZUFBZSxHQUNuQixDQUFBLFlBQVksYUFBWixZQUFZLHVCQUFaLFlBQVksQ0FBRSxXQUFXLEdBQUcsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSSxvQkFBb0IsQ0FBQztJQUVuRSx3REFBd0Q7SUFDeEQsdUNBQXVDO0lBQ3ZDLE1BQU0sV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3ZFLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNyQyxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sT0FBTyxHQUFHLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUMxQyxNQUFNLE9BQU8sR0FBRyxHQUFHLE9BQU8sSUFBSSxTQUFTLElBQUksTUFBTSxFQUFFLENBQUM7SUFFcEQsU0FBUyxnQkFBZ0IsQ0FBQyxDQUFjLEVBQUUsZUFBOEI7UUFDdEUsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUNaLE1BQU0sUUFBUSxHQUFHLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUF5QixDQUFDLENBQUM7WUFDM0QsTUFBTSxRQUFRLEdBQW9CLEVBQUUsQ0FBQztZQUVyQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUU7Z0JBQzdCLFFBQVEsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2xDLENBQUMsQ0FBQyxDQUFDO1lBRUgsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUVELFdBQVcsQ0FDVCxtQkFBbUIsRUFDbkI7Ozs7Ozs7Ozs7Ozs7Ozs7OzBEQWlCc0QsY0FBYyxRQUFRLFNBQVMsUUFBUSxPQUFPOzs7OzJEQUk3QyxlQUFlLFFBQVEsU0FBUyxRQUFRLE9BQU87Ozs7Ozs7Ozs7OztLQVlyRyxDQUNGLENBQUM7SUFDRixNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRW5ELE1BQU0sZUFBZSxHQUFrQixDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEUsVUFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQzNDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FDckMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBuYW1lc0ZpZWxkcyB9IGZyb20gJy4vc2VhcmNoLWZvcm0nO1xuaW1wb3J0IHsgcmVuZGVyQmxvY2sgfSBmcm9tICcuL2xpYi5qcyc7XG5pbXBvcnQgeyBJU2VhcmNoRm9ybURhdGEgfSBmcm9tICcuL0lTZWFyY2hGb3JtRGF0YS5qcyc7XG5pbXBvcnQgeyBmdW5jU2VhcmNoLCBuYW1lc0ZpZWxkcyB9IGZyb20gJy4vc2VhcmNoLWhlbHBlcnMuanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2VhcmNoRm9ybUJsb2NrKGNoZWNrSW5EYXRlPzogRGF0ZSwgY2hlY2tPdXREYXRlPzogRGF0ZSkge1xuICBjb25zdCB0b2RheURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICBjb25zdCBtaW5ZZWFyID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDQpO1xuICBjb25zdCBtaW5Nb250aCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSg1LCA3KTtcblxuICAvL9C00LDRgtCwINCy0YrQtdC30LTQsC4g0JXRgdC70Lgg0L3QtdGCLCDRgtC+INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOICsgMSDQtNC10L3RjCDQvtGCINGC0LXQutGD0YnQtdCz0L4g0LTQvdGPXG4gIGNvbnN0IGNoZWNrSW5EYXRlRGVmYXVsdCA9IG5ldyBEYXRlKG5ldyBEYXRlKCkpO1xuICBjaGVja0luRGF0ZURlZmF1bHQuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIDEpO1xuICBjb25zdCBjaGVja0luRGF0ZURlZmF1bHQxID0gY2hlY2tJbkRhdGVEZWZhdWx0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICBjb25zdCBjaGVja0luRGF0ZVN0ciA9XG4gICAgY2hlY2tJbkRhdGU/LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApIHx8IGNoZWNrSW5EYXRlRGVmYXVsdDE7XG5cbiAgLy8g0LTQsNGC0LAg0LLRi9C10LfQtNCwLiDQv9C+INGD0LzQvtC70YfQsNC90LjRjiAoKzIg0LTQvdGPINC+0YIg0LTQsNGC0Ysg0LLRitC10LfQtNCwKVxuICBjb25zdCBjaGVja091dERhdGVEZWZhdWx0ID0gbmV3IERhdGUobmV3IERhdGUoY2hlY2tJbkRhdGVTdHIpKTtcbiAgY2hlY2tPdXREYXRlRGVmYXVsdC5zZXREYXRlKG5ldyBEYXRlKGNoZWNrSW5EYXRlU3RyKS5nZXREYXRlKCkgKyAyKTtcbiAgY29uc3QgY2hlY2tPdXREYXRlRGVmYXVsdDEgPSBjaGVja091dERhdGVEZWZhdWx0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICBjb25zdCBjaGVja091dERhdGVTdHIgPVxuICAgIGNoZWNrT3V0RGF0ZT8udG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkgfHwgY2hlY2tPdXREYXRlRGVmYXVsdDE7XG5cbiAgLy8g0LzQsNC60YHQuNC80LDQu9GM0L3QsNGPINC00LDRgtCwINCyINC60LDQu9C10L3QtNCw0YDQtSwg0LrQvtGC0L7RgNGD0Y4g0LzQvtC20L3QviDRg9C60LDQt9Cw0YLRjC5cbiAgLy8g0K3RgtC+INC/0L7RgdC70LXQtNC90LjQuSDQtNC10L3RjCDRgdC70LXQtNGD0Y7RidC10LPQviDQvNC10YHRj9GG0LBcbiAgY29uc3QgbWF4RGF0ZUZ1bGwgPSBuZXcgRGF0ZShOdW1iZXIobWluWWVhciksIE51bWJlcihtaW5Nb250aCkgKyAxLCAwKTtcbiAgY29uc3QgbWF4RGF5ID0gbWF4RGF0ZUZ1bGwuZ2V0RGF0ZSgpO1xuICBjb25zdCBtYXhNb3VudGggPSBtYXhEYXRlRnVsbC5nZXRNb250aCgpICsgMTtcbiAgY29uc3QgbWF4WWVhciA9IG1heERhdGVGdWxsLmdldEZ1bGxZZWFyKCk7XG4gIGNvbnN0IG1heERhdGUgPSBgJHttYXhZZWFyfS0ke21heE1vdW50aH0tJHttYXhEYXl9YDtcblxuICBmdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0KGU6IFN1Ym1pdEV2ZW50LCBuYW1lc0ZpZWxkc0Zvcm06IG5hbWVzRmllbGRzW10pIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKGUudGFyZ2V0KSB7XG4gICAgICBjb25zdCBkYXRhRm9ybSA9IG5ldyBGb3JtRGF0YShlLnRhcmdldCBhcyBIVE1MRm9ybUVsZW1lbnQpO1xuICAgICAgY29uc3QgZGF0YVJvd3M6IElTZWFyY2hGb3JtRGF0YSA9IHt9O1xuXG4gICAgICBuYW1lc0ZpZWxkc0Zvcm0uZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgZGF0YVJvd3NbZWxdID0gZGF0YUZvcm0uZ2V0KGVsKTtcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jU2VhcmNoKGRhdGFSb3dzKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJCbG9jayhcbiAgICAnc2VhcmNoLWZvcm0tYmxvY2snLFxuICAgIGBcbiAgICA8Zm9ybSBpZD1cImZvcm1cIj5cbiAgICAgIDxmaWVsZHNldCBjbGFzcz1cInNlYXJjaC1maWxlZHNldFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjaXR5XCI+0JPQvtGA0L7QtDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJjaXR5XCIgdHlwZT1cInRleHRcIiBkaXNhYmxlZCB2YWx1ZT1cItCh0LDQvdC60YIt0J/QtdGC0LXRgNCx0YPRgNCzXCIgLz5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgZGlzYWJsZWQgdmFsdWU9XCI1OS45Mzg2LDMwLjMxNDFcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwhLS08ZGl2IGNsYXNzPVwicHJvdmlkZXJzXCI+XG4gICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJwcm92aWRlclwiIHZhbHVlPVwiaG9teVwiIGNoZWNrZWQgLz4gSG9teTwvbGFiZWw+XG4gICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJwcm92aWRlclwiIHZhbHVlPVwiZmxhdC1yZW50XCIgY2hlY2tlZCAvPiBGbGF0UmVudDwvbGFiZWw+XG4gICAgICAgICAgPC9kaXY+LS0hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2staW4tZGF0ZVwiPtCU0LDRgtCwINC30LDQtdC30LTQsDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJjaGVjay1pbi1kYXRlXCIgdHlwZT1cImRhdGVcIiB2YWx1ZT0ke2NoZWNrSW5EYXRlU3RyfSBtaW49JHt0b2RheURhdGV9IG1heD0ke21heERhdGV9IG5hbWU9XCJjaGVja2luXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNoZWNrLW91dC1kYXRlXCI+0JTQsNGC0LAg0LLRi9C10LfQtNCwPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCBpZD1cImNoZWNrLW91dC1kYXRlXCIgdHlwZT1cImRhdGVcIiB2YWx1ZT0ke2NoZWNrT3V0RGF0ZVN0cn0gbWluPSR7dG9kYXlEYXRlfSBtYXg9JHttYXhEYXRlfSBuYW1lPVwiY2hlY2tvdXRcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwibWF4LXByaWNlXCI+0JzQsNC60YEuINGG0LXQvdCwINGB0YPRgtC+0Lo8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IGlkPVwibWF4LXByaWNlXCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmljZVwiIGNsYXNzPVwibWF4LXByaWNlXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdj48YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7QndCw0LnRgtC4PC9idXR0b24+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWVsZHNldD5cbiAgICA8L2Zvcm0+XG4gICAgYFxuICApO1xuICBjb25zdCBzZWFyY2hGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKTtcblxuICBjb25zdCBuYW1lc0ZpZWxkc0Zvcm06IG5hbWVzRmllbGRzW10gPSBbJ2NoZWNraW4nLCAnY2hlY2tvdXQnLCAncHJpY2UnXTtcbiAgc2VhcmNoRm9ybT8uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+XG4gICAgaGFuZGxlRm9ybVN1Ym1pdChlLCBuYW1lc0ZpZWxkc0Zvcm0pXG4gICk7XG59XG4iXX0=